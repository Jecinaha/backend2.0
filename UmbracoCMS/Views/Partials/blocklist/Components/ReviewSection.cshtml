@inherits Umbraco.Cms.Web.Common.Views.UmbracoViewPage<Umbraco.Cms.Core.Models.Blocks.BlockListItem>
@using ContentModels = Umbraco.Cms.Web.Common.PublishedModels;

@{
    var content = (ContentModels.ReviewSection)Model.Content;
    var reviews = content.ReviewItemsList;
}

<section class="review-section">
    <div class="container">

        @if (!string.IsNullOrWhiteSpace(content.ReviewLabel))
        {
            <span class="section-label">@content.ReviewLabel</span>
        }

        @if (!string.IsNullOrWhiteSpace(content.SectionTitle))
        {
            <h2 class="section-title">@content.SectionTitle</h2>
        }

        <div class="review-grid">
            @if (reviews != null && reviews.Any())
            {
                @foreach (var item in reviews)
                {
                    var review = (ContentModels.ReviewItem)item.Content;

                    <div class="review-card">
                        @if (review.ReviewImage != null)
                        {
                            <img src="@review.ReviewImage.Url()" alt="@review.ReviewAuthor" class="review-image" />
                        }

                        <div class="review-text">
                            <p class="review-comment">@review.ReviewComment</p>

                            <div class="review-stars">
                                @for (int i = 1; i <= 5; i++)
                                {
                                    if (i <= review.ReviewStars)
                                    {
                                        <i class="fa-solid fa-star"></i>
                                    }
                                    else
                                    {
                                        <i class="fa-regular fa-star"></i>
                                    }
                                }
                            </div>

                            @* Review Author & Role *@
                            <p class="review-author">@review.ReviewAuthor</p>
                            <p class="review-role">@review.ReviewRole</p>
                        </div>
                    </div>
                }
            }
        </div>
    </div>
</section>
